language: java
dist: trusty
install:
  - wget -N http://chromedriver.storage.googleapis.com/2.30/chromedriver_linux64.zip
    -P ~/
  - unzip ~/chromedriver_linux64.zip -d ~/
  - rm ~/chromedriver_linux64.zip
  - sudo mv -f ~/chromedriver /usr/local/share/
  - sudo chmod +x /usr/local/share/chromedriver
  - sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver
addons:
  chrome: stable
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
notifications:
  slack:
    rooms:
    - secure: TTShep1pIJznMqch4UCRZOrdC2LD/dY5BE2FTfV4INwZtV6yC5qbLchH094ZbsOI8/Tw+REnbvfVhy3GLmes9bGonRg6rm5x5nbHCc75Jq1iM6wuNV3632kixpBnBgJDiBi15rK+w+vcvpK6w/wOG3hOJP5JAqHXh7/GkPu7/gK3MoBDERFt1C5Qz+0jdnDgmvrCv+VHt4NKrVKMcaZw7XH1Lc9bHIYKfOZxjrdr6n1UX509wDchxofNmMyJrE+q8Am3oGFkoNfdycVsoHFRGLHayBIP0SVFZZBACZVPnbjlPO0yC+z2UMA88xPQHqgjetWlSggf+VR5j1jnUmQlTssDh8Gatp+Ub9eTgS/WlVPi0WQ8NXeI7wOjKCSJ2MXu6u/tg3g1zzg3uD8uHETQbHtMaaKU0PONERE5dgNxD8NdHQRPU+5ykxUU10aGdwnNqFpabakIJrMZ77+grD714f8lY09IuPqv96yO1xyM0L/s7yBdy/NZD9o7dtB5bnqix5Yo2gw6jj0pTccxV2fNeckrKzaIY4SF68DxgtgFGRJLBpclAtGvizmvcFipZJ27Q13TAu8n3KQsEWSLn8j8RhxbJ9Mf5sIRv3yHA8E/yVMTTE67jAKbXuDVVx1WMzQGzDtfQk4mUYtiLgC5vKa5P04sgPFMSyk+7btSl1ODpes=
  email:
    recipients:
    - andris16@ru.is
    on_success: never
    on_failure: always
after_success:
- bash <(curl -s https://codecov.io/bash)
deploy:
  provider: heroku
  api_key:
    secure: UJbNjngCRiF5J6LMJjTTd2uHhKIsnWmqpnB6HdW7LMtiLxu95dRPgz+3zL7MrzvuLx2ocBtAQy9PVDE7LCb3DXqbbi0JA6NLeGaH4q2g87bk1DZ1uQPUKgw8wKwXfVGDuOdT3vXtgtdEKk92RXcT97gzU371ZPJEKWybNHcfvNRILFkRI12mO4r/QJ1Y6dhsoy0egVxrfyrdOWHqc91nbddXaGawYZmyv+H4eBHF9CWEAjkJPI3k9TfjuFtghTfDSPM1Cz7R7f8+2iE3nfBSqSy9oM04JQt5b5stbHLDaue2E26h09k1vDK0LLidAqU6QhD78VzOP4pSVhADGpfaw6BM2WI7tlcHmYJQtfKAR/bnkgkdGXMikFCOiU85rKe1HQRR4fA1wTvH+8n+OfsAb2sey3ofn72Ih4Gd2/vRzix/snGNvqKb3uJ4cSi+WAAwcA5Xe1QZrvSsqrJX+/bPzCLSMkLDf0/lDPRlK5sdJIZC7dxKb300YWIkfQA4BcpsySdTF229jS/YmTo0FRRiKmt1iHRy2W6li3gHU7I733rT388IRcbBIJEL3PsDASTuMShNWNJ4/OtSMXD724tL9375OFl7LKajZ9WnwUKOFAlXU5SUpqDbFDPMajkRhSNQNPqYxvyTXknfzDumC4/piM/OnnEQzcVzSvNyf5E/rVE=
  app: tictactoe-ddos-staging
after_deploy:
  - ./gradlew check
  - ./gradlew selenium